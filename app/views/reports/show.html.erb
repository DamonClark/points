<h1 class="dashboard-title"><%= @project.title %></h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col" class="col-title">Story Title</th>
      <th scope="col" class="col-title">Person 1's Best Estimate</th>
      <th scope="col" class="col-title">Person 1's Worst Estimate</th>
      <th scope="col" class="col-title">Person 2's Best Estimate</th>
      <th scope="col" class="col-title">Person 2's Worst Estimate</th>
      <th scope="col" class="col-title">Average: Best Estimates</th>
      <th scope="col" class="col-title">Average: Worst Estimates</th>
    </tr>
  </thead>

  <tbody>
    <% @stories.each do | story | %>
      <% @users = story.estimates.map(&:user) %>
      <tr>
        <td><%= story.title%></td>

        <% @users.each do |user| %>
          <td><%= user_estimate(story, user, 'best') %></td>
          <td><%= user_estimate(story, user, 'worst') %></td>
        <% end %>

        <% if @users.size <= 1 %>
          <td><%= "-" %></td>
          <td><%= "-" %></td>
        <% end %>

        <td><%= best_estimate_for_story(story) %></td>
        <td><%= worst_estimate_for_story(story) %></td>
      </tr>
    <% end %>
  </tbody>

  <tfoot>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td><strong> Total Hours </strong></td>
      <td><strong><%= @project.best_estimate_sum %></strong></td>
      <td><strong><%= @project.worst_estimate_sum %></strong></td>
    </tr>
  </tfoot>

</table>

<%= link_to 'Back', reports_index_path, id:"back" %>
